\section{Evaluation}
\label{sec:evaluation}

\begin{enumerate}
    \item Benchmarks (describe our benchmarks)
    \item Results (total time, split out SMPT time from our rust code time)
    \item Analysis of optimizations (how much time they save, petri net sizes, semilinear set sizes)
    \item Limitations (examples we cannot solve, future work that would help)
\end{enumerate}


\noindent
\textbf{Experimentation details.}
All experiments ran on a second generation Lenovo Notebook ThinkPad P16s, with 16 AMD cores and a RAM of 58 GB, with a Linux Ubuntu 24.04.2 operating system.
%
We plan on making all our code, benchmarks raw results publicly available with the final version of this paper.
 


\subsection{Benchmarks Overview}
\label{subsec:benchmarks}

\begin{itemize}
	\item \textbf{Core expressions \& operators}: Benchmarks testing arithmetic, boolean, and simple control expressions.
	\item \textbf{Fred (mixed arithmetic)}: Mixed control and arithmetic transformations (Fred series).
	\item \textbf{Stop (circular-increment) series}: Circular increment loops and variants.
	\item \textbf{Concurrency \& locking loops}: Concurrent looping patterns with locking and tricky interactions.
	\item \textbf{Non-deterministic choice \& randomness}: Random choice and non-deterministic branching benchmarks.
	\item \textbf{Networking \& system protocols}: Networking protocols and system-level monitoring.
	\item \textbf{Multi-request workflows}: Benchmarks modeling multiple requests or sequential interactions.
	\item \textbf{JSON state-machine examples}: Example JSON-encoded state machine workflows.
\end{itemize}


\subsection{Results}

%\FloatBarrier      

% ---------------------- Combined Table ----------------------
\begin{table}[H]
	\centering
	\small
	\setlength{\tabcolsep}{3pt}
	\renewcommand{\arraystretch}{0.9}
	\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}%
			p{1.5cm}  % Category
			p{3cm}     % Benchmark
			c c c c c  % Features: If, While, ?, Arith, Yield
			r r       % Runtime
			c         % Serializable
		}
		\toprule
		\textbf{Category}
		& \textbf{Benchmark}
		& \multicolumn{5}{c}{\textbf{Features}}
		& \multicolumn{2}{c}{\textbf{Runtime (ms)}}
		& \textbf{Serializable} \\
		\cmidrule(lr){3-7} \cmidrule(lr){8-9}
		& & If & While & ? & Arith & Yield & w/ SMPT & w/o SMPT & \\
		\midrule
		
		\multirow{4}{=}{Core expressions \& operators}
		& \texttt{nested\_while.ser}                            &  & \cmark &  &  &      & -- & -- & \cmark \\
		& \texttt{ex.ser}                                       &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{simple\_nonser2.ser}                          &  &        &  &  &      & -- & -- &        \\
		& \texttt{simple\_nonser2\_minus\_yields\_is\_ser.ser}  &  &        &  &  &      & -- & -- & \cmark \\
		\midrule
		
		\multirow{4}{=}{JSON state-machine examples}
		& \texttt{data\_flow.json}       &  &        &  &  &      & -- & -- &        \\
		& \texttt{shopping\_cart.json}   &  &        &  &  &      & -- & -- &        \\
		& \texttt{login\_flow.json}      &  &        &  &  &      & -- & -- &        \\
		& \texttt{state\_machine.json}   &  &        &  &  &      & -- & -- &        \\
		\midrule
		
		\multirow{4}{=}{Multi-request workflows}
		& \texttt{multiple\_requests\_updated.ser} &  &        &  &  &      & -- & -- & \cmark \\
		& \texttt{less\_simple\_ser.ser}  &  & \cmark &  &  & \cmark & -- & -- &        \\
		& \texttt{simple\_nonser.ser}     &  &        &  &  &      & -- & -- &        \\
		& \texttt{simple\_ser.ser}        &  &        &  &  & \cmark & -- & -- & \cmark \\
		\midrule
		
		\multirow{8}{=}{Fred (mixed arithmetic)}
		& \texttt{fred2\_arith.ser}                     &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{fred\_arith.ser}                      &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{fred\_arith\_simplified\_until\_1.ser} &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{fred\_arith\_simplified\_until\_2.ser} &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{fred\_arith\_tricky.ser}               &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{fred\_arith\_tricky2.ser}              &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{fred\_arith\_tricky3.ser}              &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{incrdecr.ser}                         &  & \cmark &  &  &      & -- & -- & \cmark \\
		\midrule
		
		\multirow{7}{=}{Stop (circular-increment) series}
		& \texttt{stop.ser}    &  & \cmark &  &  &      & -- & -- & \cmark \\
		& \texttt{stop2.ser}   &  & \cmark &  &  &      & -- & -- & \cmark \\
		& \texttt{stop3.ser}   &  &        &  &  &      & -- & -- & \cmark \\
		& \texttt{stop3a.ser}  &  &        &  &  &      & -- & -- & \cmark \\
		& \texttt{stop4.ser}   &  & \cmark &  &  &      & -- & -- & \cmark \\
		& \texttt{stop4a.ser}  &  & \cmark &  &  &      & -- & -- & \cmark \\
		& \texttt{funny.ser}   &  &        &  &  & \cmark & -- & -- & \cmark \\
		\midrule
		
		\multirow{7}{=}{Concurrency \& locking loops}
		& \texttt{complex\_while\_with\_yields.ser}                &  & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{tricky2.ser}                                     &  &        &  &  &      & -- & -- & \cmark \\
		& \texttt{tricky3.ser}                                     &  &        &  &  &      & -- & -- & \cmark \\
		& \texttt{tricky3\_ser.ser}                                &  &        &  &  &      & -- & -- & \cmark \\
		& \texttt{self\_loop.ser}                                  & \cmark & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{self\_loop2.ser}                                 & \cmark & \cmark &  &  & \cmark & -- & -- & \cmark \\
		& \texttt{simple\_nonser2\_turned\_ser\_with\_locks.ser}   &  &        &  &  &      & -- & -- &        \\
		\midrule
		
		\multirow{9}{=}{Non-deterministic choice \& randomness}
		& \texttt{nondet.ser}                         &  &        & \cmark &  &      & -- & -- & \cmark \\
		& \texttt{nondet2.ser}                        &  &        & \cmark &  &      & -- & -- & \cmark \\
		& \texttt{nondet\_impl.ser}                   &  &        & \cmark &  &      & -- & -- & \cmark \\
		& \texttt{nondet\_impl2.ser}                  &  &        & \cmark &  & \cmark & -- & -- & \cmark \\
		& \texttt{modulo.ser}                         &  &        & \cmark &  &      & -- & -- &        \\
		& \texttt{modulo\_nonser.ser}                 &  &        & \cmark &  &      & -- & -- &        \\
		& \texttt{simple\_nonser3.ser}                &  &        &  &  &      & -- & -- &        \\
		& \texttt{flag\_non\_ser.ser}                 &  &        & \cmark &  &      & -- & -- &        \\
		& \texttt{flag\_non\_ser\_turned\_ser.ser}    &  &        & \cmark &  &      & -- & -- &        \\
		\midrule
		
		\multirow{7}{=}{Networking \& system protocols}
		& \texttt{bank.ser}                                    & \cmark & \cmark & \cmark &  & \cmark & -- & -- & \cmark \\
		& \texttt{bank\_without\_yields.ser}                   & \cmark & \cmark & \cmark &  & \cmark & -- & -- & \cmark \\
		& \texttt{BGP\_routing.ser}                            & \cmark & \cmark & \cmark &  & \cmark & -- & -- & \cmark \\
		& \texttt{snapshot\_isolation\_network\_monitoring.ser} & \cmark & \cmark & \cmark &  & \cmark & -- & -- & \cmark \\
		& \texttt{snapshot\_isolation\_network\_monitoring\_without\_yields.ser} & \cmark & \cmark & \cmark &  &      & -- & -- & \cmark \\
		& \texttt{stateful\_firewall.ser}                      & \cmark &        & \cmark &  & \cmark & -- & -- & \cmark \\
		& \texttt{stateful\_firewall\_without\_yields.ser}     & \cmark &        & \cmark &  &      & -- & -- & \cmark \\
		\bottomrule
	\end{tabular*}
	\caption{Overview of benchmarks with combined categories and updated serializability markings.}
	\label{tab:benchmarks-all}
\end{table}


\subsection{Optimization Analysis}


%\begin{figure}[htbp]
%	\centering
%	\includegraphics[width=0.4\textwidth]{plots/petri_size_reduction_plot.pdf}
%	\caption{Size reduction of Petri nets through optimization techniques. The plot shows the reduction in the number of places and transitions after applying our optimization passes. Averaged on all Petri Nets of 50 benchmarks (timeout 30 seconds).}
%	\label{fig:petri_size_reduction}
%\end{figure}


%\begin{figure}[htbp]
%	\centering
%	\includegraphics[width=0.4\textwidth]{plots/timeout_10000_cumulative_solved_linear.pdf}
%	\caption{Size reduction of Petri nets through optimization techniques. The plot shows the reduction in the number of places and transitions after applying our optimization passes. Averaged on all Petri Nets of 50 benchmarks (timeout 30 seconds).}
%	\label{fig:runtime}
%\end{figure}



\begin{center}
		\begin{minipage}[t]{0.48\textwidth}
		\centering
		\includegraphics[width=\linewidth]{plots/timeout_10000_cumulative_solved_log.pdf}
		\captionof{figure}{Cumulative number of solved instances over time with a 10\,000-second timeout (log scale).}
		\label{fig:timeout_cumulative_solved_log}
	\end{minipage}\hfill
	\begin{minipage}[t]{0.48\textwidth}
		\centering
		\includegraphics[width=\linewidth]{plots/petri_size_reduction_plot_timeout_120s.pdf}
		\captionof{figure}{Reduction of Petri nets size (places and transitions) via bidirectional pruning 
%(timeout 120 seconds)
.}
		\label{fig:petri_size_reduction}
	\end{minipage}
\end{center}





	
\begin{table}[H]
	\centering
	\begin{tabular}{l c c c c}
		\toprule
	& \multicolumn{2}{c}{num components} & \multicolumn{2}{c}{periods per component} \\
	\cmidrule(lr){2-3} \cmidrule(lr){4-5}
	& mean & max & mean & max \\
	\midrule
	baseline (all ON)         &   3.09    &   22    &   1.38   &    6   \\
	no\_remove\_redundant     &  10.04    &  194    &   \textbf{1.83}   &   13   \\
	no\_generate\_less        &\textbf{3{,}371.44}    &\textbf{147{,}464}   &   1.70   &   \textbf{29}   \\
	no\_smart\_order          &   3.18    &   22    &   1.40   &    6   \\
  \bottomrule
  \end{tabular}
  \caption{Comparison of experiment runs with a 120-second timeout.}
\end{table}



\newpage





%\section{Comprehensive Statistics}
%\begin{table}[H]
%	\centering
%	\input{tables/comprehensive\_stats.tex}
%	\caption{Comprehensive statistics}
%	\label{tab:comprehensive\_stats}
%\end{table}
%
%\section{Pruning Effectiveness}
%\begin{table}[H]
%	\centering
%	\input{tables/pruning_effectiveness.tex}
%	\caption{Petri net pruning effectiveness}
%	\label{tab:pruning\_effectiveness}
%\end{table}
%
%\section{Timing Comparison}
%\begin{table}[H]
%	\centering
%	\input{tables/timing_comparison.tex}
%	\caption{Comparison of optimized vs.\ unoptimized run times}
%	\label{tab:timing\_comparison}
%\end{table}
%
%\section{Optimization Breakdown}
%\begin{table}[H]
%	\centering
%	\input{tables/optimization_breakdown.tex}
%	\caption{Impact of individual optimizations}
%	\label{tab:optimization\_breakdown}
%\end{table}
%
%\section{Summary Statistics}
%\begin{table}[H]
%	\centering
%	\input{tables/summary_stats.tex}
%	\caption{Overall summary statistics}
%	\label{tab:summary\_stats}
%\end{table}