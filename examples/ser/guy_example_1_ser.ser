request init {
    if (s == 1) {
        if (X == 0) {
            X := 1;
            a := 1
        } else {
            ?
        };
        s := 2;
        yield
    } else {
        ?
    };
    if (s == 2) {
        if (X == 1) {
            b := 1;
            X := 0
        } else {
            ?
        };
        s := 3;
        yield
    } else {
        ?
    }
}